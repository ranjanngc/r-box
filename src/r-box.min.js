class RBox extends HTMLElement{_select=null;_bind=null;_items=[{key:"-1",value:"empty"}];_data=null;_bindMap={};constructor(){super(),this._bind=this.getAttribute(":bind"),this._select=document.createElement("select"),this.bindObject=window[this._bind],this._data={...this.bindObject,map:{},interpolation:{}},this.parseChild(this),this.attachProxy()}parseChild=t=>{t.childNodes&&this.parseNodes(t.childNodes)};parseNodes=t=>{t.forEach(t=>{for(var e in t.dataset)this.initializeNode(t,e);this.applyInterpolation(t),this.parseChild(t)})};initializeNode(t,e){const i=t.dataset[e],a={el:t,attr:e,bind:i};let n=JSON.parse(t.getAttribute("react-on")??"[]");n.push(i),n.forEach(t=>{this._data.map[t]=this._data.map[i]||[],this._data.map[t].push(a)}),t.setAttribute(e,"function"==typeof this._data[i]?this._data[i]():this._data[i]),this.attachEvents(t,e,i)}applyInterpolation=e=>{if(-1<e.textContent.indexOf("${")){const i=e.textContent.replace("${","").replace("}","").replace(" ","").trim();let t=JSON.parse(e.getAttribute("react-on")??"[]");t.push(i);const a={el:e,text:()=>"function"==typeof this._data[i]?this._data[i]():""+this._data[i]};t.forEach(t=>{this._data.interpolation[t]=this._data.interpolation[i]||[],this._data.interpolation[t].push(a)}),e.innerHTML=a.text()}};attachProxy=()=>{window[this._bind]=new Proxy(this._data,{set(i,t,e){return i[t]=e,i.map[t]&&i.map[t].forEach(t=>{var e="function"==typeof i[t.bind]?i[t.bind]():i[t.bind];t.el.setAttribute(t.attr,e),"boolean"==typeof e&&(e?t.el.setAttribute(t.attr,"true"):t.el.removeAttribute(t.attr)),t.el[t.attr]&&(t.el[t.attr]=e)}),i.interpolation[t]&&i.interpolation[t].forEach(t=>{t.el.innerHTML=t.text()}),!0}})};attachEvents=(t,e,i)=>{-1!==["value","checked"].indexOf(e)&&t.addEventListener("input",t=>{window[this._bind][i]="boolean"==typeof window[this._bind][i]?t.target.checked:t.target.value})}}customElements.define("r-box",RBox);