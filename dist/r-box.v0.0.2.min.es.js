class t extends HTMLElement{}class e extends t{constructor(){super(...arguments),this.attachEvents=(t,e,i)=>{-1!==["value","checked"].indexOf(e)&&t.addEventListener("input",(t=>{window[this._bind][i]="boolean"==typeof window[this._bind][i]?t.target.checked:t.target.value}))}}}class i extends e{constructor(){super(...arguments),this.polate=t=>{var e;if(t.textContent.indexOf("${")>-1){const i=t.textContent.replace("${","").replace("}","").replace(" ","").trim();let s=JSON.parse(null!==(e=t.getAttribute("react-on"))&&void 0!==e?e:"[]");s.push(i);const a={el:t,polate:!0,bind:()=>"function"==typeof this._data[i]?this._data[i]():`${this._data[i]}`};s.forEach((t=>{this._data.bindmap[t]=this._data.bindmap[i]||[],this._data.bindmap[t].push(a)})),t.innerHTML=a.bind()}}}}class s extends i{constructor(){super(...arguments),this.parse=t=>{t.childNodes&&this.bind(t.childNodes)},this.bind=t=>{t.forEach((t=>{for(let e in t.dataset)this.init(t,e);this.polate(t),this.parse(t)}))}}init(t,e){var i;const s=t.dataset[e],a={el:t,attr:e,bind:s};let n=JSON.parse(null!==(i=t.getAttribute("react-on"))&&void 0!==i?i:"[]");n.push(s),n.forEach((t=>{this._data.bindmap[t]=this._data.bindmap[s]||[],this._data.bindmap[t].push(a)})),t.setAttribute(e,"function"==typeof this._data[s]?this._data[s]():this._data[s]),this.attachEvents(t,e,s)}}class a extends s{constructor(){super(...arguments),this.setup=()=>{window[this._bind]=new Proxy(this._data,{set:(t,e,i)=>(t[e]=i,t.bindmap[e]&&t.bindmap[e].forEach((e=>{let i="function"==typeof t[e.bind]?t[e.bind]():t[e.bind];"function"==typeof e.bind&&(i=e.bind()),e.polate?e.el.innerText=i:(e.el.setAttribute(e.attr,i),"boolean"==typeof i&&(i?e.el.setAttribute(e.attr,"true"):e.el.removeAttribute(e.attr)),e.el[e.attr]&&(e.el[e.attr]=i))})),!0)})}}}customElements.define("r-box",class extends a{constructor(){super(),this._bind=this.getAttribute("data-bind")||"",this._data=Object.assign(Object.assign({},window[this._bind]),{bindmap:{},interpolation:{}}),this.parse(this),this.setup()}});
