class t extends HTMLElement{}class e extends t{constructor(){super(...arguments),this.attachEvents=(t,e,s)=>{-1!==["value","checked"].indexOf(e)&&t.addEventListener("input",(t=>{window[this._bind][s]="boolean"==typeof window[this._bind][s]?t.target.checked:t.target.value}))}}}class s extends e{constructor(){super(...arguments),this.polate=t=>{var e;if(t.textContent.indexOf("${")>-1){const s=t.textContent.replace("${","").replace("}","").replace(" ","").trim();let i=JSON.parse(null!==(e=t.getAttribute("react-on"))&&void 0!==e?e:"[]");i.push(s);const a={el:t,polate:!0,bind:()=>"function"==typeof this._data[s]?this._data[s]():`${this._data[s]}`};i.forEach((t=>{this._data.bindmap[t]=this._data.bindmap[s]||[],this._data.bindmap[t].push(a)})),t.innerHTML=a.bind()}}}}class i extends s{constructor(){super(...arguments),this.parse=t=>{t.childNodes&&this.bind(t.childNodes)},this.bind=t=>{t.forEach((t=>{for(let e in t.dataset)this.init(t,e);this.polate(t),this.parse(t)}))}}init(t,e){var s;const i=t.dataset[e],a={el:t,attr:e,bind:i};let n=JSON.parse(null!==(s=t.getAttribute("react-on"))&&void 0!==s?s:"[]");n.push(i),n.forEach((t=>{this._data.bindmap[t]=this._data.bindmap[i]||[],this._data.bindmap[t].push(a)})),t.setAttribute(e,"function"==typeof this._data[i]?this._data[i]():this._data[i]),this.attachEvents(t,e,i)}}class a extends i{constructor(){super(...arguments),this.setup=()=>{window[this._bind]=new Proxy(this._data,{set:(t,e,s)=>(t[e]=s,t.bindmap[e]&&t.bindmap[e].forEach((e=>{const s="function"==typeof t[e.bind]?t[e.bind]():t[e.bind];e.polate?e.el.innerHTML=s:(e.el.setAttribute(e.attr,s),"boolean"==typeof s&&(s?e.el.setAttribute(e.attr,"true"):e.el.removeAttribute(e.attr)),e.el[e.attr]&&(e.el[e.attr]=s))})),!0)})}}}customElements.define("r-box",class extends a{constructor(){super(),this._bind=this.getAttribute("data-bind")||"",this._data=Object.assign(Object.assign({},window[this._bind]),{bindmap:{},interpolation:{}}),this.parse(this),this.setup()}});
